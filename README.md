# check-branch-rule

## よくあるブランチ

- main
- release-202502(リリースブランチ)
- feat-****(開発時間が長い新機能)
- feat/****(開発時間が短い新機能)
- chore/****(ドキュメントの更新など)
- test/****(テストの追加など)

## やりたいこと

- [ ] mainブランチには直接pushしない
- [ ] release-20****ブランチには直接pushしない
- [ ] feat/****からrelease-202502にはスカッシュマージのみ
- [ ] release-202502からmainにはマージのみ
- [ ] feat-****からrelease-252502にはマージのみ

## githubにあるブランチのルールセット一覧

## 1. 作成の制限(Restrict creations)
特定の権限を持つユーザーのみがブランチを作成できるようにします。これにより、ブランチの乱立を防ぎ、プロジェクト構造を整理できます。
- **効果**: 権限のないユーザーによる不必要なブランチ作成を防止
- **適用例**: 本番環境に関連するブランチの作成制限

## 2. 更新の制限(Restrict updates)
特定の権限を持つユーザーのみが既存ブランチを更新できるようにします。重要なブランチへの変更を管理し、意図しない修正を防止します。
- **効果**: 重要ブランチの保護
- **適用例**: メインブランチやリリースブランチの保護

## 3. 削除の制限(Restrict deletions)
特定の権限を持つユーザーのみがブランチを削除できるようにします。重要なブランチが誤って削除されることを防ぎます。
- **効果**: 重要なコード履歴の保護
- **適用例**: メインブランチや長期的な機能ブランチの保護

## 4. 線形履歴の要求(Require linear history)
マージコミットを禁止し、コミット履歴を線形に保ちます。これにより、履歴が明確になり、問題が発生した場合に原因特定が容易になります。
- **効果**: クリーンで追跡しやすいコミット履歴の維持
- **適用例**: リベースワークフローの強制

## 5. デプロイメントの成功要求(Require deployments to succeed)
コードをマージする前に、特定の環境へのデプロイが成功することを要求します。これにより、本番環境に問題のあるコードがマージされるリスクを低減します。
- **効果**: テスト環境での検証によるコード品質保証
- **適用例**: ステージング環境へのデプロイ成功をマージ条件とする

## 6. 署名済みコミットの要求(Require signed commits)
すべてのコミットに検証済みの署名を要求します。コードの出所を確認し、不正な変更を防止します。
- **効果**: コード変更の信頼性と透明性の向上
- **適用例**: セキュリティが重要なプロジェクトでの実装

## 7. マージ前のプルリクエスト要求(Require a pull request before merging)
直接コミットを禁止し、変更はすべてプルリクエストを通じて行うことを要求します。これにより、コードレビューが確実に行われます。
- **効果**: コードレビュープロセスの徹底
- **適用例**: すべての開発ブランチに適用し、品質管理を強化

## 8. ステータスチェックの合格要求(Require status checks to pass)
コードをマージする前に、指定されたステータスチェック（テスト、コード分析など）の合格を要求します。自動化されたテストにより、品質を確保します。
- **効果**: 自動テストによる品質保証
- **適用例**: ユニットテスト、統合テストの成功をマージ条件とする

## 9. 強制プッシュのブロック(Block force pushes)
強制プッシュを禁止し、コミット履歴の上書きを防止します。これにより、コードの履歴が保護され、変更の追跡が容易になります。
- **効果**: コミット履歴の保全と透明性の確保
- **適用例**: 共有ブランチでの履歴改ざん防止

## 10. コードスキャン結果の要求(Require code scanning results)
セキュリティ脆弱性やコード品質の問題を検出するためのコードスキャンを要求します。これにより、問題のあるコードがマージされるリスクを低減します。
- **効果**: セキュリティ脆弱性や品質問題の早期発見
- **適用例**: セキュリティスキャン、静的解析ツールの結果を確認してからマージ


### ルール

## 1. protected main branch rule

3,7(mergeのみ),9を有効化

## 2. protected release branch rule


### やったこと
マージ先の設定はできそうだけどマージもとの設定はできなそう？
mainとrelease